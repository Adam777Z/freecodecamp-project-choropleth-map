const projectName="choropleth";localStorage.setItem("example_project","D3: Choropleth"),document.addEventListener("DOMContentLoaded",function(a){const t="./assets/json/counties.json",e="./assets/json/education.json";Promise.all([t,e].map(a=>d3.json(a))).then(function(a){const t=a[0],e={};a[1].forEach(a=>{e[a.fips]=a,delete e[a.fips].fips});const n={AL:"Alabama",AK:"Alaska",AS:"American Samoa",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District Of Columbia",FM:"Federated States Of Micronesia",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MH:"Marshall Islands",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",MP:"Northern Mariana Islands",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PW:"Palau",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VI:"Virgin Islands",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"},s=1032,o=600,r=d3.geoPath(),i=d3.select("body").append("div").attr("id","tooltip"),l=d3.select("#canvas").append("svg").attr("width",s).attr("height",o),d=d3.scaleThreshold().domain(function(a,t,e){let n=[],s=(t-a)/e,o=a;for(let a=1;a<e;a++)n.push(o+a*s);return n}(d3.min(Object.keys(e).map(a=>e[a].bachelorsOrHigher)),d3.max(Object.keys(e).map(a=>e[a].bachelorsOrHigher)),d3.schemeGreens[9].length)).range(d3.schemeGreens[9]),c=d3.scaleLinear().domain(d3.extent(Object.keys(e).map(a=>e[a].bachelorsOrHigher))).range([0,s/2.5]),h=d3.axisBottom(c).tickValues(d.domain()),p=l.append("g").attr("id","legend").attr("transform","translate("+s/2.3+", 0)");p.append("g").selectAll("rect").data(d.range().map(function(a){let t=d.invertExtent(a);return null==t[0]&&(t[0]=c.domain()[0]),null==t[1]&&(t[1]=c.domain()[1]),t})).enter().append("rect").attr("fill",(a,t)=>d(a[0])).attr("x",(a,t)=>c(a[0])).attr("y",16).attr("width",(a,t)=>c(a[1])-c(a[0])).attr("height",(a,t)=>20),p.append("g").attr("transform","translate(0, 36)").call(h),p.append("text").attr("transform","translate("+s/5+", 11)").style("text-anchor","middle").text("Attainment (%)"),l.append("path").datum(topojson.mesh(t,t.objects.states,(a,t)=>a!==t)).attr("class","states").attr("d",r),l.append("g").attr("class","counties").selectAll("path").data(topojson.feature(t,t.objects.counties).features).enter().append("path").attr("class","county").attr("d",r).attr("fill",a=>d(e[a.id].bachelorsOrHigher)).attr("data-fips",a=>a.id).attr("data-education",a=>e[a.id].bachelorsOrHigher).on("mouseover",a=>i.style("display","block").attr("data-education",e[a.id].bachelorsOrHigher).text(n[e[a.id].state]+": "+e[a.id].area_name+": "+e[a.id].bachelorsOrHigher+"%")).on("mousemove",()=>i.style("top",d3.event.pageY-35+"px").style("left",d3.event.pageX+5+"px")).on("mouseout",()=>i.style("display","none"))})});